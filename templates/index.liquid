<!-- LUCINE MINIMAL -->
<script>
console.log('🎯 INDEX.LIQUID TEMPLATE LOADED');
console.log('📋 MENU ITEMS:');
{% assign main_menu = linklists['menu-principale'] %}
{% for link in main_menu.links %}
console.log('{{ forloop.index }}. {{ link.title }} - URL: {{ link.url }}');
{% endfor %}
</script>

<!-- Video Background -->
<div class="video-bg">
  <video autoplay muted loop playsinline>
    <source src="https://cdn.shopify.com/videos/c/o/v/088cf9e084664519ad8bf3af537b87fe.mp4" type="video/mp4">
  </video>
</div>

<!-- Navigation Container -->
<div class="navigation-container" data-tabs-section>

  <!-- Include sidebar navigation -->
  {% assign current_page_title = 'Home' %}
  {% render 'sidebar-navigation' %}

  <!-- Content Area -->
  <div class="content-wrapper">
    <div class="content show">
      <div class="formatted-content">
        <!-- Homepage vuota - solo video background -->
      </div>
    </div>
  </div> <!-- end content-wrapper -->
</div>

<!-- Mobile Features Slideshow (completely outside navigation container) -->
<div class="mobile-features-slideshow">
  <div class="slideshow-content">
    <div class="slideshow-header">
      <p class="slideshow-dates">Dal 6 dicembre al 6 gennaio</p>
    </div>
    <div class="features-container">
      <div class="features-slide active">
        <div class="sketch-card sketch seed-1">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="14 8 6 12 10 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">💡</div>
                <h4>+1 milione di lucine</h4>
                <p>Un mare di luci che illumina la magia del Natale</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-2">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="6 14 8 10 12 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🗺️</div>
                <h4>≈ 1km di percorso</h4>
                <p>Un viaggio incantato attraverso le meraviglie natalizie</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-3">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="10 6 14 8 12 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🚌</div>
                <h4>Servizio navetta gratuito</h4>
                <p>Comodo trasporto direttamente all'ingresso</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-4">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="8 10 6 14 9 12" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🅿️</div>
                <h4>Parcheggio gratuito</h4>
                <p>Ampi spazi per la tua auto senza costi aggiuntivi</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-5">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="12 8 10 6 14 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🍕</div>
                <h4>Stand gastronomico</h4>
                <p>Delizie locali per rendere perfetta la tua visita</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-6">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="9 12 8 10 6 14" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🎄</div>
                <h4>Mercatino natalizio</h4>
                <p>Artigianato locale e regali unici per tutti</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-1">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="14 8 6 12 10 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🎭</div>
                <h4>Eventi speciali</h4>
                <p>Spettacoli e animazioni per grandi e piccini</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-2">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="6 14 8 10 12 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🎨</div>
                <h4>+20 installazioni fatte a mano</h4>
                <p>Opere d'arte uniche create dai nostri artigiani</p>
              </div>
            </div>
            
            <div class="features-slide">
              <div class="sketch-card sketch seed-3">
                <svg class="sketch-border" viewBox="0 0 100 100" aria-hidden="true" preserveAspectRatio="none">
                  <rect x="4" y="4" width="92" height="92" rx="12" fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-dasharray="10 6 14 8 12 9" vector-effect="non-scaling-stroke"/>
                </svg>
                <div class="feature-icon">🐕</div>
                <h4>Pet friendly</h4>
                <p>Benvenuti anche i tuoi amici a quattro zampe</p>
              </div>
            </div>
          </div>
          
          <!-- Purchase button -->
          <div class="features-cta">
            <a href="/products/biglietto-parco-lucine-di-natale-2025" class="cta-button">
              Acquista Biglietti
            </a>
          </div>
    </div>
  </div>
</div>

<style>
/* Mobile Features Slideshow - Only visible on mobile */
.mobile-features-slideshow {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 380px;
  z-index: 100;
  pointer-events: auto;
}

/* Show only on mobile */
@media (max-width: 1023px) {
  .mobile-features-slideshow {
    display: block;
  }
}

.slideshow-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.slideshow-dates {
  color: #FFFFFF;
  font-size: 1.1rem;
  font-weight: 600;
  margin: 0 0 1rem 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: rgba(0, 0, 0, 0.4);
  padding: 8px 16px;
  border-radius: 20px;
  display: inline-block;
}

.features-container {
  position: relative;
  overflow: visible;
  height: 240px;
  margin-bottom: 1.5rem;
}

.features-slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.features-slide.active {
  opacity: 1;
}


/* Mobile Features Cards - use sketch-card system with proper background */
.mobile-features-slideshow .sketch-card {
  min-height: 220px;
  background: none !important;
  padding: 1.5rem;
  margin: 0;
  text-align: center;
  position: relative;
}

/* SVG behind content */
.mobile-features-slideshow .sketch-border {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* Background inside SVG area */
.mobile-features-slideshow .sketch-card::before {
  content: '';
  position: absolute;
  top: 8%;
  left: 8%;
  right: 8%;
  bottom: 8%;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 8px;
  z-index: 0;
}

/* Content above background */
.mobile-features-slideshow .sketch-card > *:not(.sketch-border):not(::before) {
  position: relative;
  z-index: 2;
}

/* Apply blur to container, not individual cards */
.features-container {
  backdrop-filter: blur(8px) !important;
}

.mobile-features-slideshow .feature-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.mobile-features-slideshow .sketch-card h4 {
  color: #FFFFFF !important;
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 0.6rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.mobile-features-slideshow .sketch-card p {
  color: #FFFFFF !important;
  font-size: 0.95rem;
  line-height: 1.3;
  margin: 0;
}

/* CTA Button */
.features-cta {
  text-align: center;
  margin-top: 1.5rem;
}

.cta-button {
  display: inline-block;
  background: #DC2626 !important;
  color: rgb(255, 255, 255) !important;
  text-decoration: none !important;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  font-size: 16px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
  transition: all 0.3s ease;
  border: 1.66667px solid #DC2626 !important;
  backdrop-filter: blur(15px);
  font-family: "Providence Sans", -apple-system, sans-serif;
}

.cta-button:hover {
  background: #B91C1C !important;
  color: #FFFFFF !important;
  text-decoration: none !important;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
  border-color: #B91C1C !important;
}

/* Touch/Swipe area */
.features-container {
  touch-action: pan-y;
  user-select: none;
}
</style>

<script>
// Mobile Features Slideshow Controller
document.addEventListener('DOMContentLoaded', function() {
  const slideshow = document.querySelector('.mobile-features-slideshow');
  const container = document.querySelector('.features-container');
  const slides = document.querySelectorAll('.features-slide');
  const indicators = document.querySelectorAll('.indicator');
  
  if (!slideshow || slides.length === 0) return;
  
  let currentSlide = 0;
  let startX = 0;
  let isTouch = false;
  let autoSlideInterval;
  
  // Auto-slide functionality
  function startAutoSlide() {
    autoSlideInterval = setInterval(() => {
      nextSlide();
    }, 4000); // Change slide every 4 seconds
  }
  
  function stopAutoSlide() {
    clearInterval(autoSlideInterval);
  }
  
  // Slide navigation
  function goToSlide(index) {
    // Remove all classes
    slides.forEach(slide => {
      slide.classList.remove('active', 'prev');
    });
    
    indicators.forEach(indicator => {
      indicator.classList.remove('active');
    });
    
    // Set current slide
    slides[index].classList.add('active');
    indicators[index].classList.add('active');
    
    currentSlide = index;
  }
  
  function nextSlide() {
    const next = (currentSlide + 1) % slides.length;
    goToSlide(next);
  }
  
  function prevSlide() {
    const prev = (currentSlide - 1 + slides.length) % slides.length;
    goToSlide(prev);
  }
  
  // Touch/Swipe handling
  container.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
    isTouch = true;
    stopAutoSlide();
  });
  
  container.addEventListener('touchmove', (e) => {
    if (!isTouch) return;
    e.preventDefault(); // Prevent scrolling
  });
  
  container.addEventListener('touchend', (e) => {
    if (!isTouch) return;
    
    const endX = e.changedTouches[0].clientX;
    const deltaX = startX - endX;
    const threshold = 50; // Minimum swipe distance
    
    if (Math.abs(deltaX) > threshold) {
      if (deltaX > 0) {
        nextSlide(); // Swipe left = next slide
      } else {
        prevSlide(); // Swipe right = previous slide
      }
    }
    
    isTouch = false;
    startAutoSlide(); // Restart auto-slide
  });
  
  // Click indicators - removed since no indicators
  
  // Pause auto-slide on hover/touch
  slideshow.addEventListener('mouseenter', stopAutoSlide);
  slideshow.addEventListener('mouseleave', startAutoSlide);
  
  // Start auto-slide
  startAutoSlide();
  
  console.log('🎠 Mobile Features Slideshow initialized with', slides.length, 'slides');
  console.log('📱 Screen width:', window.innerWidth);
  console.log('🎯 Slideshow element:', slideshow);
  console.log('📦 Slideshow display style:', window.getComputedStyle(slideshow).display);
  
  // Debug positioning and styles
  const slideshowRect = slideshow.getBoundingClientRect();
  console.log('📏 Slideshow position:', {
    top: slideshowRect.top,
    left: slideshowRect.left,
    width: slideshowRect.width,
    height: slideshowRect.height
  });
  
  // Check for style conflicts
  const activeSlide = document.querySelector('.features-slide.active');
  if (activeSlide) {
    const cardStyles = window.getComputedStyle(activeSlide.querySelector('.feature-card'));
    console.log('🎨 Card styles:', {
      background: cardStyles.background,
      color: cardStyles.color,
      border: cardStyles.border,
      zIndex: cardStyles.zIndex
    });
  }
  
  // Check button styles
  const ctaButton = document.querySelector('.cta-button');
  if (ctaButton) {
    const buttonStyles = window.getComputedStyle(ctaButton);
    console.log('🔘 Button styles:', {
      background: buttonStyles.background,
      color: buttonStyles.color,
      border: buttonStyles.border
    });
  }
});
</script>


<!-- ERUDA MOBILE DEBUGGER (TEMPORARY) -->
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>
  eruda.init();
  
  // Log collector for easy copy/paste
  window.debugLogs = [];
  const originalLog = console.log;
  console.log = function(...args) {
    // Store logs with timestamp
    const timestamp = new Date().toLocaleTimeString();
    window.debugLogs.push(`[${timestamp}] ${args.join(' ')}`);
    // Keep max 100 logs to avoid memory issues
    if (window.debugLogs.length > 100) {
      window.debugLogs.shift();
    }
    originalLog.apply(console, args);
  };
  
  // Function to copy all logs
  window.copyLogs = function() {
    const allLogs = window.debugLogs.join('\n');
    navigator.clipboard.writeText(allLogs).then(() => {
      alert('Logs copiati negli appunti!');
    }).catch(() => {
      // Fallback: show logs in alert for manual copy
      prompt('Copia questi logs:', allLogs);
    });
  };
</script>

<!-- BACK TO TOP BUTTON -->
<button id="back-to-top" onclick="scrollToTop()">↑</button>

